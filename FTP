{
  "name": "FTP",
  "version": "1.0.2",
  "type": "actuator",
  "script": "var pwd = waylayUtil.getProperty(options, 'pwd')  || options.globalSettings.FTP_PWD\nvar user = waylayUtil.getProperty(options, 'user')  || options.globalSettings.FTP_USR\nvar host = waylayUtil.getProperty(options, 'server') || options.globalSettings.FTP_SERVER \n\nvar resource = waylayUtil.getResource(options) || 'Waylay'\n\nvar fileName = waylayUtil.getProperty(options, 'fileName') || resource + ' ' + moment().toISOString() + '.csv'\nvar data = waylayUtil.getProperty(options, 'data') || 'foo bar text'\nconsole.log('save data', data)\n\n\nvar connectionProperties = {\n    host: host,\n    user: user,\n    password: pwd\n}\n\n\nvar c = new FTPClient()  \nvar buffer = new Buffer(data)  \nconsole.log('ftp data', data)\n\ntry {\n  c.connect(connectionProperties)   \n  c.on('ready', function() {\n    c.put(buffer, fileName,  function(err) {\n      if (err) throw err\n      c.end()\n      send()\n    })\n  })  } \ncatch (err){   \n  send(new Error(err))  \n}\n",
  "metadata": {
    "author": "Veselin",
    "category": "General",
    "description": "FTP Actuator",
    "iconURL": "https://static.waylay.io/plugs/icons/ftp.png",
    "supportedStates": [],
    "requiredProperties": [
      "server",
      "user",
      "pwd",
      "fileName",
      "data"
    ],
    "requiredRawData": []
  }
}
