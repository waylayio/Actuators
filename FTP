{
  "name": "FTP",
  "version": "1.0.1",
  "type": "actuator",
  "script": "var host = waylayUtil.getProperty(options, \"server\") || \"ftp.funet.fi\"\nvar file = waylayUtil.getProperty(options, \"file\") || \"/pub/standards/RFC/rfc959.txt\"\n\nvar connectionProperties = {\n    host: host\n};\n\nvar write = concat(function(data) {\n  //console.log(data.toString());\n  send(null, {observedState : \"Collected\", rawData : { document: data.toString()}})\n})\n\n\ntry{\n  var c = new FTPClient();\n    c.on('ready', function() {\n      c.get(file, function(err, stream) {\n        if (err) throw err;\n        stream.once('close', function() {\n          write.end()\n          c.end();\n        });\n        stream.pipe(write);\n      });\n    });\n    c.connect(connectionProperties); \n} catch (err){\n    send(null, {observedState : \"Error\"})\n}\n",
  "metadata": {
    "author": "Veselin",
    "category": "General",
    "description": "FTP Actuator um Daten aus Waylay auf einen FTP zu schieben",
    "iconURL": "https://dummyimage.waylay.io/160&text=FTP",
    "supportedStates": [],
    "requiredProperties": [
      "testProperty1"
    ],
    "requiredRawData": []
  }
}
